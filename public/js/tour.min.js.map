{"version":3,"sources":["tour.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tour.min.js","sourcesContent":["(function(){\n\n\tvar read_form = function(){\n\t\tvar markers = [];\n\t\tvar poly = '';\n\n\t\tvar items = $('#items').val().split(',');\n\n\t\tfor (var i = items.length - 1; i >= 0; i--) {\n\t\t\tvar item_element = $('li[data-leaf_id=\"'+items[i]+'\"]');\n\t\t\tif (item_element.length > 0) {\n\t\t\t\tmarkers.push({\"lng\": item_element.data().lng, \"lat\": item_element.data().lat});\n\t\t\t}\n\t\t};\n\n\t\t// TODO: get the current polyline (from a designated input) var and return it\n\t\tvar poly = $(\"#polygon-data\").val();\n\t\ttry{\n\t\t\tif(poly=='') poly='[]';\n\t\t\tpoly = JSON.parse(poly);\n\t\t}catch(e){\n\t\t\tpoly = JSON.parse('[]');\n\t\t}\n\n\t\treturn {\"markers\": markers, \"polygons\": poly };\n\t}\n\n\tvar gmapp = $(\"#google-maps\").gmap({\n\t\tcenter: function(){\n\n\t\t},\n\t\tonload: function(m){\n\t\t\tm.loadChanges(read_form(), true);\n\t\t},\n\t\tonchange: function(m){\n\t\t\t// sync polygon changes back?\n\t\t\tvar data = m.exportData();\n\t\t\t$(\"#polygon-data\").val(JSON.stringify(data.polygons));\n\t\t},\n\t\tconstraints: {\n\t\t\t\"polygon\": {\"draggable\": false, \"max\": 1},\n\t\t\t\"marker\": {\"draggable\": false} \n\t\t},\n\t\tlabels: {\n\t\t\t\"marker\": false,\n\t\t\t\"polygon\": \"Draw Route\",\n\t\t\t\"delete\": \"Delete\",\n\t\t}\n\t});\n\n\t$(\"#items\").change(function(){\n\t\tgmapp.loadChanges(read_form(),true);\n\t}); \n\n\twindow.gmapp = gmapp;\n\n})();"],"sourceRoot":"/source/"}