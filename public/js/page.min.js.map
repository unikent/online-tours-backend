{"version":3,"sources":["page.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"page.min.js","sourcesContent":["$(document).ready(function() {\n\n    $form = $(\"#page_edit\");\n\n    $form.dirtyFields({\n        denoteDirtyForm: true,\n        denoteDirtyFields:true,\n        trimText:true,\n        formChangeCallback:function($dirty,$fields){\n            var $form = $(this);\n            var $save_btn = $form.find('.page-save').first();\n            if($dirty){\n                $form.addClass('dirtyForm');\n                $save_btn.prop('disabled',false);\n            }else{\n                $form.removeClass('dirtyForm');\n                $save_btn.prop('disabled',true);\n            }\n        }\n    });\n\n    $form.on('keyup','input, textarea, select',function(){\n        $.fn.dirtyFields.updateFormState($(this).closest('form'));\n    });\n\n\n    $form.submit(function (e) {\n        e.preventDefault();\n\n        $form.find('button[type=\"submit\"]').prop('disabled',true);\n        // if everything was good, get form\n        var form = $(this);\n\n        // grab form data\n        var payload = form.parseForm();\n\n        // Error helper\n        var showError = function () {\n            showResponseMessage($('#message_area'), 'Unable to save changes.', 'danger');\n            $form.find('.page-save').first().prop('disabled',false);\n        };\n\n        // Submit it\n        $.ajax({\n            type: 'POST',\n            url: APP_DATA.restfulURL('page','update', payload.id),\n            data: payload,\n            success: function (data, textStatus, jqXHR) {\n                if (data.success === true) {\n                    var $form = $(\"#page_edit\");\n                    $form.populateForm(data.page);\n                    $.fn.dirtyFields.formSaved($form);\n                    showResponseMessage($('#message_area'), 'Page Updated.');\n                } else {\n                    showError();\n                }\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                showError();\n            }\n        });\n    });\n\n});"],"sourceRoot":"/source/"}